# ObjectOS AMIS Application

è¿™æ˜¯ä¸€ä¸ªä½¿ç”¨ [AMIS](https://aisuda.bce.baidu.com/amis) ä½ä»£ç æ¡†æ¶å®ç°çš„ ObjectOS å‰ç«¯åº”ç”¨ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### è¿è¡Œå¼€å‘æœåŠ¡å™¨

åœ¨é¡¹ç›®æ ¹ç›®å½•è¿è¡Œï¼š

```bash
pnpm run dev:amis
```

è¿™å°†åŒæ—¶å¯åŠ¨ï¼š
- **ObjectOS æœåŠ¡å™¨**: http://localhost:3000 (åç«¯ API)
- **AMIS å‰ç«¯åº”ç”¨**: http://localhost:5174 (å¼€å‘ç•Œé¢)

è®¿é—® http://localhost:5174 å³å¯ä½¿ç”¨åº”ç”¨ã€‚

### é»˜è®¤ç™»å½•

ä½¿ç”¨ä»¥ä¸‹å‡­æ®ç™»å½•ï¼ˆéœ€è¦å…ˆåœ¨ ObjectOS ä¸­åˆ›å»ºç”¨æˆ·ï¼‰ï¼š

```
Email: your@email.com
Password: yourpassword
```

## âœ¨ ç‰¹æ€§

- ğŸ¨ **ä½ä»£ç å¼€å‘**: ä½¿ç”¨ AMIS æ¡†æ¶ï¼Œé€šè¿‡ JSON Schema å¿«é€Ÿæ„å»ºç•Œé¢
- ğŸ“Š **è‡ªåŠ¨è¡¨æ ¼ç”Ÿæˆ**: æ ¹æ®å¯¹è±¡å…ƒæ•°æ®è‡ªåŠ¨ç”Ÿæˆ CRUD è¡¨æ ¼
- ğŸ“ **è‡ªåŠ¨è¡¨å•ç”Ÿæˆ**: æ ¹æ®å­—æ®µå®šä¹‰è‡ªåŠ¨ç”Ÿæˆåˆ›å»º/ç¼–è¾‘è¡¨å•
- ğŸ” **èº«ä»½è®¤è¯**: é›†æˆ Better-Auth è®¤è¯ç³»ç»Ÿ
- ğŸ¯ **å…ƒæ•°æ®é©±åŠ¨**: ä» ObjectOS æœåŠ¡å™¨åŠ¨æ€è·å–å¯¹è±¡å…ƒæ•°æ®
- ğŸŒ **å›½é™…åŒ–**: æ”¯æŒä¸­æ–‡ç•Œé¢ï¼ˆå¯æ‰©å±•å…¶ä»–è¯­è¨€ï¼‰
- ğŸ“± **å“åº”å¼è®¾è®¡**: æ”¯æŒæ¡Œé¢å’Œç§»åŠ¨è®¾å¤‡

## ğŸ“– åŠŸèƒ½è¯´æ˜

### ä¸»é¡µ - å¯¹è±¡åˆ—è¡¨

åº”ç”¨å¯åŠ¨åæ˜¾ç¤ºç³»ç»Ÿä¸­æ‰€æœ‰å¯ç”¨çš„å¯¹è±¡ï¼š

- å¯¹è±¡åç§°å’Œæ ‡ç­¾
- å¯¹è±¡å›¾æ ‡
- å¯¹è±¡æè¿°
- ç‚¹å‡»è¿›å…¥å¯¹è±¡çš„ CRUD ç•Œé¢

### å¯¹è±¡ CRUD é¡µé¢

æ¯ä¸ªå¯¹è±¡éƒ½æœ‰è‡ªåŠ¨ç”Ÿæˆçš„å®Œæ•´ CRUD åŠŸèƒ½ï¼š

**è¡¨æ ¼è§†å›¾:**
- âœ“ æ•°æ®åˆ—è¡¨å±•ç¤º
- âœ“ åˆ†é¡µï¼ˆ10/20/50/100 æ¡/é¡µï¼‰
- âœ“ æ’åº
- âœ“ ç­›é€‰å™¨
- âœ“ æ‰¹é‡é€‰æ‹©å’Œæ“ä½œ
- âœ“ å¯¼å‡ºåŠŸèƒ½

**è¡¨å•åŠŸèƒ½:**
- âœ“ æ–°å»ºè®°å½•ï¼ˆæ¨¡æ€å¯¹è¯æ¡†ï¼‰
- âœ“ ç¼–è¾‘è®°å½•ï¼ˆæ¨¡æ€å¯¹è¯æ¡†ï¼‰
- âœ“ å­—æ®µéªŒè¯
- âœ“ å¿…å¡«å­—æ®µæç¤º
- âœ“ å…³è”å¯¹è±¡é€‰æ‹©å™¨

**æ“ä½œ:**
- âœ“ åˆ›å»º - "æ–°å»º" æŒ‰é’®
- âœ“ ç¼–è¾‘ - è¡Œæ“ä½œ "ç¼–è¾‘"
- âœ“ åˆ é™¤ - è¡Œæ“ä½œ "åˆ é™¤"ï¼ˆå¸¦ç¡®è®¤ï¼‰
- âœ“ æ‰¹é‡åˆ é™¤

## ğŸ—ï¸ æ¶æ„

```
apps/amis/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/       # React ç»„ä»¶
â”‚   â”‚   â””â”€â”€ AmisRenderer.tsx   # AMIS æ¸²æŸ“å™¨ç»„ä»¶
â”‚   â”œâ”€â”€ context/         # React Context
â”‚   â”‚   â””â”€â”€ AuthContext.tsx    # è®¤è¯ä¸Šä¸‹æ–‡
â”‚   â”œâ”€â”€ lib/            # å·¥å…·åº“
â”‚   â”‚   â””â”€â”€ auth.ts            # è®¤è¯å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ pages/          # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Home.tsx           # é¦–é¡µ - å¯¹è±¡åˆ—è¡¨
â”‚   â”‚   â”œâ”€â”€ Login.tsx          # ç™»å½•é¡µ
â”‚   â”‚   â””â”€â”€ ObjectPage.tsx     # å¯¹è±¡è¯¦æƒ…é¡µ - CRUD æ“ä½œ
â”‚   â”œâ”€â”€ types/          # TypeScript ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ utils/          # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ api.ts             # API å®¢æˆ·ç«¯
â”‚   â”‚   â””â”€â”€ schemaBuilder.ts   # AMIS Schema æ„å»ºå™¨
â”‚   â”œâ”€â”€ App.tsx         # åº”ç”¨ä¸»ç»„ä»¶
â”‚   â”œâ”€â”€ main.tsx        # åº”ç”¨å…¥å£
â”‚   â””â”€â”€ index.css       # å…¨å±€æ ·å¼
â”œâ”€â”€ IMPLEMENTATION.md   # è¯¦ç»†å®ç°æ–‡æ¡£
â””â”€â”€ README.md          # æœ¬æ–‡ä»¶
```

## ğŸ”§ æ„å»ºç”Ÿäº§ç‰ˆæœ¬

```bash
cd apps/amis
pnpm run build
```

æ„å»ºè¾“å‡ºåœ¨ `dist/` ç›®å½•ã€‚

## ğŸ§ª æµ‹è¯•

è¿è¡Œæµ‹è¯•å¥—ä»¶ï¼š

```bash
cd apps/amis
pnpm test              # è¿è¡Œæ‰€æœ‰æµ‹è¯•
pnpm test:ui          # ä½¿ç”¨ UI ç•Œé¢è¿è¡Œæµ‹è¯•
pnpm test:coverage    # è¿è¡Œæµ‹è¯•å¹¶ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
```

æµ‹è¯•åŒ…æ‹¬ï¼š
- âœ… 30+ å•å…ƒæµ‹è¯• (schemaBuilder, API client, components)
- âœ… 5 ç»„ä»¶æµ‹è¯• (AmisRenderer, ObjectPage)
- âœ… 6 é›†æˆæµ‹è¯• (å®Œæ•´é¡µé¢æµç¨‹)

è¯¦ç»†ä¿¡æ¯è¯·å‚è€ƒ [TESTING.md](./TESTING.md)

## ğŸ“š API é›†æˆ

åº”ç”¨ä¾èµ–ä»¥ä¸‹ ObjectOS API ç«¯ç‚¹ï¼š

### å…ƒæ•°æ®ç«¯ç‚¹
```
GET /api/metadata/objects          # è·å–æ‰€æœ‰å¯¹è±¡åˆ—è¡¨
GET /api/metadata/:objectName      # è·å–å¯¹è±¡å…ƒæ•°æ®
```

### æ•°æ®ç«¯ç‚¹
```
POST /api/data/:objectName/query   # æŸ¥è¯¢è®°å½•
POST /api/data/:objectName         # åˆ›å»ºè®°å½•
PATCH /api/data/:objectName/:id    # æ›´æ–°è®°å½•
DELETE /api/data/:objectName/:id   # åˆ é™¤è®°å½•
```

## ğŸ¨ å­—æ®µç±»å‹æ˜ å°„

### è¡¨å•å­—æ®µ

| ObjectQL ç±»å‹ | AMIS ç±»å‹ |
|--------------|-----------|
| text | input-text |
| textarea | textarea |
| email | input-email |
| number | input-number |
| currency | input-number |
| select | select |
| multiselect | multi-select |
| date | input-date |
| datetime | input-datetime |
| checkbox | checkbox |
| lookup | select |

è¯¦ç»†è¯´æ˜è¯·å‚è€ƒ [IMPLEMENTATION.md](./IMPLEMENTATION.md)

## ğŸ› ï¸ è‡ªå®šä¹‰é…ç½®

### ä¿®æ”¹ä¸»é¢˜

åœ¨ `src/components/AmisRenderer.tsx` ä¸­ä¿®æ”¹ CSS å¯¼å…¥ï¼š

```typescript
// ä½¿ç”¨ cxd ä¸»é¢˜ï¼ˆé»˜è®¤ï¼‰
import 'amis/lib/themes/cxd.css';

// æˆ–ä½¿ç”¨å…¶ä»–ä¸»é¢˜
// import 'amis/lib/themes/antd.css';
// import 'amis/lib/themes/dark.css';
```

å¯ç”¨ä¸»é¢˜: `cxd`, `antd`, `dark`

### æ‰©å±•å­—æ®µç±»å‹

åœ¨ `src/utils/schemaBuilder.ts` ä¸­çš„ç±»å‹æ˜ å°„å‡½æ•°ä¸­æ·»åŠ æ–°çš„å­—æ®µç±»å‹æ”¯æŒã€‚

## ğŸ“– æ–‡æ¡£

- [è¯¦ç»†å®ç°æ–‡æ¡£](./IMPLEMENTATION.md) - æ¶æ„ã€å·¥ä½œåŸç†ã€è‡ªå®šä¹‰æŒ‡å—
- [AMIS å®˜æ–¹æ–‡æ¡£](https://aisuda.bce.baidu.com/amis/zh-CN/docs/index)
- [ObjectOS æ–‡æ¡£](https://github.com/objectql/objectos)

## ğŸ†š å¯¹æ¯” apps/web

| ç‰¹æ€§ | apps/web | apps/amis |
|------|----------|-----------|
| UI æ¡†æ¶ | React + AG Grid | React + AMIS |
| å¼€å‘æ–¹å¼ | ç»„ä»¶åŒ–ç¼–ç¨‹ | Schema é…ç½® |
| ä»£ç é‡ | ~5000 è¡Œ | ~1500 è¡Œ |
| å®šåˆ¶æ€§ | é«˜ | ä¸­-é«˜ |
| æ‰“åŒ…å¤§å° | ~500KB | ~2.5MB |
| ç§»åŠ¨ç«¯æ”¯æŒ | æœ‰é™ | è‰¯å¥½ |
| å­¦ä¹ æ›²çº¿ | React ä¸“ä¸šçŸ¥è¯† | AMIS Schema çŸ¥è¯† |

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“„ License

MIT

